<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" id="mermaid-1606610485657" width="3085" height="2915" version="1.1" viewBox="-50 -10 3085 2915"><metadata id="metadata571"/><style id="style2">#mermaid-1606610485657{font-family:&quot;trebuchet ms&quot;,verdana,arial;font-size:16px;fill:#333;}#mermaid-1606610485657 .error-icon{fill:#552222;}#mermaid-1606610485657 .error-text{fill:#552222;stroke:#552222;}#mermaid-1606610485657 .edge-thickness-normal{stroke-width:2px;}#mermaid-1606610485657 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1606610485657 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1606610485657 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1606610485657 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1606610485657 .marker{fill:#333333;}#mermaid-1606610485657 .marker.cross{stroke:#333333;}#mermaid-1606610485657 svg{font-family:&quot;trebuchet ms&quot;,verdana,arial;font-size:16px;}#mermaid-1606610485657 .actor{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1606610485657 text.actor &gt; tspan{fill:black;stroke:none;}#mermaid-1606610485657 .actor-line{stroke:grey;}#mermaid-1606610485657 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-1606610485657 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-1606610485657 #arrowhead path{fill:#333;stroke:#333;}#mermaid-1606610485657 .sequenceNumber{fill:white;}#mermaid-1606610485657 #sequencenumber{fill:#333;}#mermaid-1606610485657 #crosshead path{fill:#333;stroke:#333;}#mermaid-1606610485657 .messageText{fill:#333;stroke:#333;}#mermaid-1606610485657 .labelBox{stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:#ECECFF;}#mermaid-1606610485657 .labelText,#mermaid-1606610485657 .labelText &gt; tspan{fill:black;stroke:none;}#mermaid-1606610485657 .loopText,#mermaid-1606610485657 .loopText &gt; tspan{fill:black;stroke:none;}#mermaid-1606610485657 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243,59.7765363128%,87.9019607843%);fill:hsl(259.6261682243,59.7765363128%,87.9019607843%);}#mermaid-1606610485657 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-1606610485657 .noteText,#mermaid-1606610485657 .noteText &gt; tspan{fill:black;stroke:none;}#mermaid-1606610485657 .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-1606610485657 .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-1606610485657 .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-1606610485657:root{--mermaid-font-family:&quot;trebuchet ms&quot;,verdana,arial;}#mermaid-1606610485657 sequence{fill:apa;}</style><g id="g13" transform="translate(-49.5,-9.5)"><line id="actor0" x1="75" x2="75" y1="5" y2="2914" stroke="#999" stroke-width=".5" class="actor-line"/><rect id="rect7" width="150" height="65" x="0" y="0" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text11" x="75" y="32.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan9" x="75" dy="0">Owner</tspan></text></g><g id="g22" transform="translate(-49.5,-9.5)"><line id="actor1" x1="292" x2="292" y1="5" y2="2914" stroke="#999" stroke-width=".5" class="actor-line"/><rect id="rect16" width="150" height="65" x="217" y="0" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text20" x="292" y="32.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan18" x="292" dy="0">PoolContributor</tspan></text></g><g id="g31" transform="translate(-49.5,-9.5)"><line id="actor2" x1="492" x2="492" y1="5" y2="2914" stroke="#999" stroke-width=".5" class="actor-line"/><rect id="rect25" width="150" height="65" x="417" y="0" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text29" x="492" y="32.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan27" x="492" dy="0">Recipient</tspan></text></g><g id="g40" transform="translate(-49.5,-9.5)"><line id="actor3" x1="692" x2="692" y1="5" y2="2914" stroke="#999" stroke-width=".5" class="actor-line"/><rect id="rect34" width="150" height="65" x="617" y="0" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text38" x="692" y="32.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan36" x="692" dy="0">Factory</tspan></text></g><g id="g49" transform="translate(-49.5,-9.5)"><line id="actor4" x1="892" x2="892" y1="5" y2="2914" stroke="#999" stroke-width=".5" class="actor-line"/><rect id="rect43" width="150" height="65" x="817" y="0" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text47" x="892" y="32.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan45" x="892" dy="0">MACIFactory</tspan></text></g><g id="g58" transform="translate(-49.5,-9.5)"><line id="actor5" x1="1092" x2="1092" y1="5" y2="2914" stroke="#999" stroke-width=".5" class="actor-line"/><rect id="rect52" width="150" height="65" x="1017" y="0" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text56" x="1092" y="32.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan54" x="1092" dy="0">UserRegistry</tspan></text></g><g id="g67" transform="translate(-49.5,-9.5)"><line id="actor6" x1="1292" x2="1292" y1="5" y2="2914" stroke="#999" stroke-width=".5" class="actor-line"/><rect id="rect61" width="150" height="65" x="1217" y="0" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text65" x="1292" y="32.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan63" x="1292" dy="0">RecipientRegistry</tspan></text></g><g id="g76" transform="translate(-49.5,-9.5)"><line id="actor7" x1="1492" x2="1492" y1="5" y2="2914" stroke="#999" stroke-width=".5" class="actor-line"/><rect id="rect70" width="150" height="65" x="1417" y="0" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text74" x="1492" y="32.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan72" x="1492" dy="0">Contributor</tspan></text></g><g id="g85" transform="translate(-49.5,-9.5)"><line id="actor8" x1="1839" x2="1839" y1="5" y2="2914" stroke="#999" stroke-width=".5" class="actor-line"/><rect id="rect79" width="150" height="65" x="1764" y="0" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text83" x="1839" y="32.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan81" x="1839" dy="0">FundingRound</tspan></text></g><g id="g94" transform="translate(-49.5,-9.5)"><line id="actor9" x1="2476" x2="2476" y1="5" y2="2914" stroke="#999" stroke-width=".5" class="actor-line"/><rect id="rect88" width="150" height="65" x="2401" y="0" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text92" x="2476" y="32.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan90" x="2476" dy="0">MACI</tspan></text></g><g id="g103" transform="translate(-49.5,-9.5)"><line id="actor10" x1="3009" x2="3009" y1="5" y2="2914" stroke="#999" stroke-width=".5" class="actor-line"/><rect id="rect97" width="150" height="65" x="2934" y="0" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text101" x="3009" y="32.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan99" x="3009" dy="0">Coordinator</tspan></text></g><defs id="defs108"><marker id="arrowhead" markerHeight="4" markerWidth="6" orient="auto" refX="5" refY="2"><path id="path105" d="M 0,0 V 4 L 6,2 Z"/></marker></defs><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text122" x="434.5" y="70.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">deploy MACI factory</text><line style="fill:none" id="line124" x1="25.5" x2="842.5" y1="103.5" y2="103.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text126" x="534.5" y="118.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">deploy user registry</text><line style="fill:none" id="line128" x1="25.5" x2="1042.5" y1="151.5" y2="151.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text130" x="634.5" y="166.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">deploy recipient registry</text><line style="fill:none" id="line132" x1="25.5" x2="1242.5" y1="199.5" y2="199.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text134" x="334.5" y="214.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">deploy funding round factory</text><line style="fill:none" id="line136" x1="25.5" x2="642.5" y1="247.5" y2="247.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text138" x="434.5" y="262.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">transfer ownership to Factory ( call transferOwnership() )</text><line style="fill:none" id="line140" x1="25.5" x2="842.5" y1="295.5" y2="295.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text142" x="634.5" y="310.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">set max number of recipients</text><line style="fill:none" id="line144" x1="25.5" x2="1242.5" y1="343.5" y2="343.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text146" x="634.5" y="358.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">transfer control to Factory ( call setController() )</text><line style="fill:none" id="line148" x1="25.5" x2="1242.5" y1="391.5" y2="391.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text150" x="334.5" y="406.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">set MACI parameters if necessary ( call setMaciParameters() )</text><line style="fill:none" id="line152" x1="25.5" x2="642.5" y1="439.5" y2="439.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text154" x="1492.5" y="454.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">provide public key</text><line style="fill:none;stroke-dasharray:3,3" id="line156" x1="2959.5" x2="25.5" y1="487.5" y2="487.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine1"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text158" x="334.5" y="502.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">set coordinator ( call setCoordinator() )</text><line style="fill:none" id="line160" x1="25.5" x2="642.5" y1="535.5" y2="535.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text162" x="442.5" y="550.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">donate to the matching pool</text><line style="fill:none" id="line164" x1="242.5" x2="642.5" y1="583.5" y2="583.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text166" x="234.5" y="643.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">ask for registration</text><line style="fill:none;stroke-dasharray:3,3" id="line168" x1="442.5" x2="25.5" y1="676.5" y2="676.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine1"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text170" x="634.5" y="691.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">call addRecipient()</text><line style="fill:none" id="line172" x1="25.5" x2="1242.5" y1="724.5" y2="724.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><g id="g190" transform="translate(-49.5,-9.5)"><line id="line174" x1="65" x2="1302" y1="603" y2="603" class="loopLine"/><line id="line176" x1="1302" x2="1302" y1="603" y2="744" class="loopLine"/><line id="line178" x1="65" x2="1302" y1="744" y2="744" class="loopLine"/><line id="line180" x1="65" x2="65" y1="603" y2="744" class="loopLine"/><polygon id="polygon182" points="115 616 106.6 623 65 623 65 603 115 603" class="labelBox"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text184" x="90" y="616" alignment-baseline="middle" class="labelText" dominant-baseline="middle" text-anchor="middle">loop</text><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text188" x="708.5" y="621" class="loopText" text-anchor="middle"><tspan id="tspan186" x="708.5">[Adding recipients]</tspan></text></g><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text192" x="334.5" y="794.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">call deployNewRound()</text><line style="fill:none" id="line194" x1="25.5" x2="642.5" y1="827.5" y2="827.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text196" x="1216.5" y="842.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">deploy FundingRound contract</text><line style="fill:none" id="line198" x1="642.5" x2="1789.5" y1="875.5" y2="875.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text200" x="742.5" y="890.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">call deployMaci()</text><line style="fill:none" id="line202" x1="642.5" x2="842.5" y1="923.5" y2="923.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text204" x="1634.5" y="938.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">create new MACI instance</text><line style="fill:none" id="line206" x1="842.5" x2="2426.5" y1="971.5" y2="971.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text208" x="1216.5" y="986.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">call setMaci()</text><line style="fill:none" id="line210" x1="642.5" x2="1789.5" y1="1019.5" y2="1019.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><g id="g218" transform="translate(-49.5,-9.5)"><rect id="rect212" width="397" height="36" x="1467" y="1084" fill="#edf2ae" stroke="#666" class="note" rx="0" ry="0"/><text style="font-weight:400;font-size:14px;font-family:'trebuchet ms',verdana,arial" id="text216" x="1666" y="1089" alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" text-anchor="middle"><tspan id="tspan214" x="1666">contributor registers with their verified address</tspan></text></g><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text220" x="1616.5" y="1125.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">donate to the pool ( call contribute() )</text><line style="fill:none" id="line222" x1="1442.5" x2="1789.5" y1="1158.5" y2="1158.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text224" x="1416.5" y="1173.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">check that user is verified ( call isVerifiedUser() )</text><line style="fill:none" id="line226" x1="1789.5" x2="1042.5" y1="1206.5" y2="1206.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text228" x="2108.5" y="1221.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">call signUp()</text><line style="fill:none" id="line230" x1="1789.5" x2="2426.5" y1="1254.5" y2="1254.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><g id="g238" transform="translate(-49.5,-9.5)"><rect id="rect232" width="282" height="37" x="1517" y="1274" fill="#edf2ae" stroke="#666" class="note" rx="0" ry="0"/><text style="font-weight:400;font-size:14px;font-family:'trebuchet ms',verdana,arial" id="text236" x="1658" y="1279" alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" text-anchor="middle"><tspan id="tspan234" x="1658">contributor creates encrypted message(s)</tspan></text></g><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text240" x="1934.5" y="1361.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">vote ( call publishMessage() )</text><line style="fill:none" id="line242" x1="1442.5" x2="2426.5" y1="1394.5" y2="1394.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text244" x="1616.5" y="1454.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">vote ( call submitMessageBatch() )</text><line style="fill:none" id="line246" x1="1442.5" x2="1789.5" y1="1487.5" y2="1487.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text248" x="2108.5" y="1502.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">call publishMessage()</text><line style="fill:none" id="line250" x1="1789.5" x2="2426.5" y1="1535.5" y2="1535.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><g id="g272" transform="translate(-49.5,-9.5)"><line id="line252" x1="1482" x2="2486" y1="1321" y2="1321" class="loopLine"/><line id="line254" x1="2486" x2="2486" y1="1321" y2="1555" class="loopLine"/><line id="line256" x1="1482" x2="2486" y1="1555" y2="1555" class="loopLine"/><line id="line258" x1="1482" x2="1482" y1="1321" y2="1555" class="loopLine"/><line style="stroke-dasharray:3,3" id="line260" x1="1482" x2="2486" y1="1419" y2="1419" class="loopLine"/><polygon id="polygon262" points="1532 1334 1523.6 1341 1482 1341 1482 1321 1532 1321" class="labelBox"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text264" x="1507" y="1334" alignment-baseline="middle" class="labelText" dominant-baseline="middle" text-anchor="middle">alt</text><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text268" x="2009" y="1339" class="loopText" text-anchor="middle"><tspan id="tspan266" x="2009">[Single message submission]</tspan></text><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text270" x="1984" y="1437" class="loopText" text-anchor="middle">[Batch submission]</text></g><g id="g290" transform="translate(-49.5,-9.5)"><line id="line274" x1="1082" x2="2496" y1="1039" y2="1039" class="loopLine"/><line id="line276" x1="2496" x2="2496" y1="1039" y2="1565" class="loopLine"/><line id="line278" x1="1082" x2="2496" y1="1565" y2="1565" class="loopLine"/><line id="line280" x1="1082" x2="1082" y1="1039" y2="1565" class="loopLine"/><polygon id="polygon282" points="1132 1052 1123.6 1059 1082 1059 1082 1039 1132 1039" class="labelBox"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text284" x="1107" y="1052" alignment-baseline="middle" class="labelText" dominant-baseline="middle" text-anchor="middle">loop</text><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text288" x="1814" y="1057" class="loopText" text-anchor="middle"><tspan id="tspan286" x="1814">[Funding]</tspan></text></g><g id="g298" transform="translate(-49.5,-9.5)"><rect id="rect292" width="687" height="36" x="1814" y="1575" fill="#edf2ae" stroke="#666" class="note" rx="0" ry="0"/><text style="font-weight:400;font-size:14px;font-family:'trebuchet ms',verdana,arial" id="text296" x="2158" y="1580" alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" text-anchor="middle"><tspan id="tspan294" x="2158">contribution / signup deadline</tspan></text></g><g id="g306" transform="translate(-49.5,-9.5)"><rect id="rect300" width="150" height="36" x="2401" y="1621" fill="#edf2ae" stroke="#666" class="note" rx="0" ry="0"/><text style="font-weight:400;font-size:14px;font-family:'trebuchet ms',verdana,arial" id="text304" x="2476" y="1626" alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" text-anchor="middle"><tspan id="tspan302" x="2476">voting deadline</tspan></text></g><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text308" x="2693.5" y="1707.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">process messages ( call batchProcessMessage() )</text><line style="fill:none" id="line310" x1="2959.5" x2="2426.5" y1="1740.5" y2="1740.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><g id="g318" transform="translate(-49.5,-9.5)"><rect id="rect312" width="334" height="36" x="2650" y="1760" fill="#edf2ae" stroke="#666" class="note" rx="0" ry="0"/><text style="font-weight:400;font-size:14px;font-family:'trebuchet ms',verdana,arial" id="text316" x="2817" y="1765" alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" text-anchor="middle"><tspan id="tspan314" x="2817">coordinator tallies the votes and generates proofs</tspan></text></g><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text320" x="2693.5" y="1801.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">prove the correctness of vote tally ( call proveVoteTallyBatch() )</text><line style="fill:none" id="line322" x1="2959.5" x2="2426.5" y1="1834.5" y2="1834.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><g id="g330" transform="translate(-49.5,-9.5)"><rect id="rect324" width="250" height="36" x="2734" y="1854" fill="#edf2ae" stroke="#666" class="note" rx="0" ry="0"/><text style="font-weight:400;font-size:14px;font-family:'trebuchet ms',verdana,arial" id="text328" x="2859" y="1859" alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" text-anchor="middle"><tspan id="tspan326" x="2859">coordinator uploads the tally to IPFS</tspan></text></g><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text332" x="2374.5" y="1895.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">call publishTallyHash()</text><line style="fill:none" id="line334" x1="2959.5" x2="1789.5" y1="1928.5" y2="1928.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><g id="g342" transform="translate(-49.5,-9.5)"><rect id="rect336" width="167" height="36" x="100" y="1948" fill="#edf2ae" stroke="#666" class="note" rx="0" ry="0"/><text style="font-weight:400;font-size:14px;font-family:'trebuchet ms',verdana,arial" id="text340" x="184" y="1953" alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" text-anchor="middle"><tspan id="tspan338" x="184">owner verifies the tally</tspan></text></g><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text344" x="334.5" y="1989.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">call transferMatchingFunds()</text><line style="fill:none" id="line346" x1="25.5" x2="642.5" y1="2022.5" y2="2022.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text348" x="442.5" y="2037.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">pull matching funds from funding sources</text><line style="fill:none" id="line350" x1="642.5" x2="242.5" y1="2070.5" y2="2070.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text352" x="1216.5" y="2085.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">transfer matching funds and finalize the round</text><line style="fill:none" id="line354" x1="642.5" x2="1789.5" y1="2118.5" y2="2118.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text356" x="2108.5" y="2133.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">verify the total amount of spent voice credits ( call verifySpentVoiceCredits() )</text><line style="fill:none" id="line358" x1="1789.5" x2="2426.5" y1="2166.5" y2="2166.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text360" x="2108.5" y="2181.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">call totalVotes()</text><line style="fill:none" id="line362" x1="1789.5" x2="2426.5" y1="2214.5" y2="2214.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><g id="g370" transform="translate(-49.5,-9.5)"><rect id="rect364" width="250" height="36" x="1714" y="2234" fill="#edf2ae" stroke="#666" class="note" rx="0" ry="0"/><text style="font-weight:400;font-size:14px;font-family:'trebuchet ms',verdana,arial" id="text368" x="1839" y="2239" alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" text-anchor="middle"><tspan id="tspan366" x="1839">round can not be cancelled anymore</tspan></text></g><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text372" x="1116.5" y="2320.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">submit vote tally, amount of spent voice credits and proofs ( call claimFunds() )</text><line style="fill:none" id="line374" x1="442.5" x2="1789.5" y1="2353.5" y2="2353.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text376" x="1516.5" y="2368.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">find the corresponding vote option index</text><line style="fill:none" id="line378" x1="1789.5" x2="1242.5" y1="2401.5" y2="2401.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text380" x="2108.5" y="2416.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">verify the proofs</text><line style="fill:none" id="line382" x1="1789.5" x2="2426.5" y1="2449.5" y2="2449.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text384" x="1116.5" y="2464.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">transfer funds</text><line style="fill:none" id="line386" x1="1789.5" x2="442.5" y1="2497.5" y2="2497.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><g id="g404" transform="translate(-49.5,-9.5)"><line id="line388" x1="482" x2="2486" y1="2280" y2="2280" class="loopLine"/><line id="line390" x1="2486" x2="2486" y1="2280" y2="2517" class="loopLine"/><line id="line392" x1="482" x2="2486" y1="2517" y2="2517" class="loopLine"/><line id="line394" x1="482" x2="482" y1="2280" y2="2517" class="loopLine"/><polygon id="polygon396" points="532 2293 523.6 2300 482 2300 482 2280 532 2280" class="labelBox"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text398" x="507" y="2293" alignment-baseline="middle" class="labelText" dominant-baseline="middle" text-anchor="middle">loop</text><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text402" x="1509" y="2298" class="loopText" text-anchor="middle"><tspan id="tspan400" x="1509">[Distribution]</tspan></text></g><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text406" x="334.5" y="2567.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">call cancel()</text><line style="fill:none" id="line408" x1="25.5" x2="642.5" y1="2600.5" y2="2600.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text410" x="1216.5" y="2615.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">call cancel()</text><line style="fill:none" id="line412" x1="642.5" x2="1789.5" y1="2648.5" y2="2648.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text414" x="1616.5" y="2708.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">call withdrawContribution()</text><line style="fill:none" id="line416" x1="1442.5" x2="1789.5" y1="2741.5" y2="2741.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text418" x="1616.5" y="2756.5" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="16" text-anchor="middle">transfer funds</text><line style="fill:none" id="line420" x1="1789.5" x2="1442.5" y1="2789.5" y2="2789.5" stroke="none" stroke-width="2" marker-end="url(#arrowhead)" class="messageLine0"/><g id="g438" transform="translate(-49.5,-9.5)"><line id="line422" x1="1482" x2="1849" y1="2668" y2="2668" class="loopLine"/><line id="line424" x1="1849" x2="1849" y1="2668" y2="2809" class="loopLine"/><line id="line426" x1="1482" x2="1849" y1="2809" y2="2809" class="loopLine"/><line id="line428" x1="1482" x2="1482" y1="2668" y2="2809" class="loopLine"/><polygon id="polygon430" points="1532 2681 1523.6 2688 1482 2688 1482 2668 1532 2668" class="labelBox"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text432" x="1507" y="2681" alignment-baseline="middle" class="labelText" dominant-baseline="middle" text-anchor="middle">loop</text><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text436" x="1690.5" y="2686" class="loopText" text-anchor="middle"><tspan id="tspan434" x="1690.5">[Withdrawal]</tspan></text></g><g id="g460" transform="translate(-49.5,-9.5)"><line id="line440" x1="65" x2="3019" y1="1667" y2="1667" class="loopLine"/><line id="line442" x1="3019" x2="3019" y1="1667" y2="2819" class="loopLine"/><line id="line444" x1="65" x2="3019" y1="2819" y2="2819" class="loopLine"/><line id="line446" x1="65" x2="65" y1="1667" y2="2819" class="loopLine"/><line style="stroke-dasharray:3,3" id="line448" x1="65" x2="3019" y1="2532" y2="2532" class="loopLine"/><polygon id="polygon450" points="115 1680 106.6 1687 65 1687 65 1667 115 1667" class="labelBox"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text452" x="90" y="1680" alignment-baseline="middle" class="labelText" dominant-baseline="middle" text-anchor="middle">alt</text><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text456" x="1567" y="1685" class="loopText" text-anchor="middle"><tspan id="tspan454" x="1567">[Allocation of funds]</tspan></text><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text458" x="1542" y="2550" class="loopText" text-anchor="middle">[Cancelling round]</text></g><g id="g478" transform="translate(-49.5,-9.5)"><line id="line462" x1="55" x2="3029" y1="754" y2="754" class="loopLine"/><line id="line464" x1="3029" x2="3029" y1="754" y2="2829" class="loopLine"/><line id="line466" x1="55" x2="3029" y1="2829" y2="2829" class="loopLine"/><line id="line468" x1="55" x2="55" y1="754" y2="2829" class="loopLine"/><polygon id="polygon470" points="105 767 96.6 774 55 774 55 754 105 754" class="labelBox"/><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text472" x="80" y="767" alignment-baseline="middle" class="labelText" dominant-baseline="middle" text-anchor="middle">loop</text><text style="font-weight:400;font-size:16px;font-family:'trebuchet ms',verdana,arial" id="text476" x="1567" y="772" class="loopText" text-anchor="middle"><tspan id="tspan474" x="1567">[Every round]</tspan></text></g><g id="g486" transform="translate(-49.5,-9.5)"><rect id="rect480" width="150" height="65" x="0" y="2849" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text484" x="75" y="2881.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan482" x="75" dy="0">Owner</tspan></text></g><g id="g494" transform="translate(-49.5,-9.5)"><rect id="rect488" width="150" height="65" x="217" y="2849" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text492" x="292" y="2881.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan490" x="292" dy="0">PoolContributor</tspan></text></g><g id="g502" transform="translate(-49.5,-9.5)"><rect id="rect496" width="150" height="65" x="417" y="2849" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text500" x="492" y="2881.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan498" x="492" dy="0">Recipient</tspan></text></g><g id="g510" transform="translate(-49.5,-9.5)"><rect id="rect504" width="150" height="65" x="617" y="2849" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text508" x="692" y="2881.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan506" x="692" dy="0">Factory</tspan></text></g><g id="g518" transform="translate(-49.5,-9.5)"><rect id="rect512" width="150" height="65" x="817" y="2849" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text516" x="892" y="2881.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan514" x="892" dy="0">MACIFactory</tspan></text></g><g id="g526" transform="translate(-49.5,-9.5)"><rect id="rect520" width="150" height="65" x="1017" y="2849" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text524" x="1092" y="2881.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan522" x="1092" dy="0">UserRegistry</tspan></text></g><g id="g534" transform="translate(-49.5,-9.5)"><rect id="rect528" width="150" height="65" x="1217" y="2849" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text532" x="1292" y="2881.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan530" x="1292" dy="0">RecipientRegistry</tspan></text></g><g id="g542" transform="translate(-49.5,-9.5)"><rect id="rect536" width="150" height="65" x="1417" y="2849" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text540" x="1492" y="2881.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan538" x="1492" dy="0">Contributor</tspan></text></g><g id="g550" transform="translate(-49.5,-9.5)"><rect id="rect544" width="150" height="65" x="1764" y="2849" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text548" x="1839" y="2881.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan546" x="1839" dy="0">FundingRound</tspan></text></g><g id="g558" transform="translate(-49.5,-9.5)"><rect id="rect552" width="150" height="65" x="2401" y="2849" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text556" x="2476" y="2881.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan554" x="2476" dy="0">MACI</tspan></text></g><g id="g566" transform="translate(-49.5,-9.5)"><rect id="rect560" width="150" height="65" x="2934" y="2849" fill="#eaeaea" stroke="#666" class="actor" rx="3" ry="3"/><text style="font-weight:400;font-size:14px;font-family:Open-Sans,sans-serif;text-anchor:middle" id="text564" x="3009" y="2881.5" alignment-baseline="central" class="actor" dominant-baseline="central"><tspan id="tspan562" x="3009" dy="0">Coordinator</tspan></text></g></svg>